<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KullanÄ±cÄ±lar - Site Portal</title>
    <link rel="stylesheet" href="deneme.css">
</head>
<body>
    <div id="dashboardPage" class="page active">
         <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>Site Portal</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span class="user-icon">ğŸ‘¤</span>
                    <div class="user-details">
                        <span id="userName" class="user-name"></span>
                        <span id="userEmail" class="user-email"></span>
                    </div>
                </div>
                <button id="logoutBtn" class="btn btn-secondary">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <nav>
                <a href="dashboard.html" class="nav-item">
                    <span class="icon">ğŸ“Š</span>
                    Ana Sayfa
                </a>

               
                <a href="companies.html" class="nav-item">
                    <span class="icon">ğŸ¢</span>
                    Åirketler
                </a>
                <a href="individuals.html" class="nav-item">
                    <span class="icon">ğŸ‘¤</span>
                    Bireysel Hesaplar
                </a>
                <a href="complaints.html" class="nav-item">
                    <span class="icon">ğŸ“</span>
                    Åikayetler
                </a>
               
                <a href="masterUsers.html" class="nav-item active">
                    <span class="icon">ğŸ‘¥</span>
                    KullanÄ±cÄ±lar
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div id="usersContent" class="content-section active">
                <div class="section-header">
                    <h2>Master Panel KullanÄ±cÄ±larÄ±</h2>
                    <button class="btn btn-primary" id="addUserBtn" style="display: none;">
                        <span class="btn-icon">â•</span> KullanÄ±cÄ± Davet Et
                    </button>
                </div>

                <!-- Filtreler -->
                <div class="filter-box">
                    <select id="userRoleFilter">
                        <option value="all">TÃ¼m Roller</option>
                        <option value="MASTER_ADMIN">Master Admin</option>
                        <option value="PRODUCT_OWNER">Product Owner</option>
                        <option value="BOOKKEEPER">Muhasebe</option>
                        <option value="DEVELOPER">GeliÅŸtirici</option>
                        <option valude="SUPPORT">Destek</option>
                    </select>
                    <select id="userStatusFilter">
                        <option value="all">TÃ¼m Durumlar</option>
                        <option value="ACTIVE">Aktif</option>
                        <option value="PASSIVE">Pasif</option>
                        <option value="PENDING">Beklemede</option>
                    </select>
                </div>

                <!-- KullanÄ±cÄ± Listesi -->
                <div id="usersList" class="list-container"></div>

                <!-- Bekleyen Davetler -->
                <div class="section-header" style="margin-top: 2rem; display: none;" id="invitesSection">
                    <h3>Bekleyen Davetler</h3>
                </div>
                <div id="pendingInvitesList" class="invites-container"></div>
            </div>
        </main>
    </div>

    <!-- Invite User Modal -->
    <div id="inviteUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni KullanÄ±cÄ± Davet Et</h2>
                <span class="close" id="closeInviteModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="inviteUserForm">
                    <div class="form-group">
                        <label for="inviteEmail">E-posta Adresi *</label>
                        <input 
                            type="email" 
                            id="inviteEmail" 
                            placeholder="ornek@email.com"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="inviteName">Tam Ä°sim *</label>
                        <input 
                            type="text" 
                            id="inviteName" 
                            placeholder="Ad Soyad"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="inviteRole">Rol SeÃ§in *</label>
                        <select id="inviteRole" required>
                            <option value="">-- Rol SeÃ§in --</option>
                            <option value="PRODUCT_OWNER">Product Owner</option>
                            <option value="BOOKKEEPER">Muhasebe</option>
                            <option value="DEVELOPER">GeliÅŸtirici</option>
                            <option value="SUPPORT">Destek</option>
                        </select>
                    </div>

                    <div class="role-info">
                        <h4>Rol AÃ§Ä±klamalarÄ±:</h4>
                        <ul>
                            <li><strong>Product Owner:</strong> ÃœrÃ¼n yÃ¶netimi ve geliÅŸtirme yetkilerine sahip</li>
                            <li><strong>Muhasebe:</strong> Finansal raporlama ve Ã¶deme yÃ¶netimi yetkilerine sahip</li>
                            <li><strong>GeliÅŸtirici:</strong> Sistem geliÅŸtirme ve teknik destek yetkilerine sahip</li>
                            <li><strong>Destek:</strong> MÃ¼ÅŸteri destek ve ÅŸikayet yÃ¶netimi yetkilerine sahip</li>
                        </ul>
                        <p class="warning">âš ï¸ Not: Davet edilen kullanÄ±cÄ± email adresine gelen link ile hesabÄ±nÄ± doÄŸrulayÄ±p kendi ÅŸifresini oluÅŸturabilir.</p>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelInvite">Ä°ptal</button>
                        <button type="submit" class="btn btn-primary">Davet GÃ¶nder</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- User Actions Modal (Sadece MASTER_ADMIN iÃ§in) -->
    <div id="userActionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>KullanÄ±cÄ± Ä°ÅŸlemleri</h2>
                <span class="close" id="closeActionsModal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="selectedUserInfo" class="user-info-box"></div>
                
                <div class="action-buttons">
                    <button class="btn btn-warning" id="changeRoleBtn">
                        <span class="btn-icon">ğŸ”„</span> Rol DeÄŸiÅŸtir
                    </button>
                    <button class="btn btn-success" id="activateUserBtn" style="display: none;">
                        <span class="btn-icon">âœ…</span> Aktif Et
                    </button>
                    <button class="btn btn-secondary" id="deactivateUserBtn" style="display: none;">
                        <span class="btn-icon">â¸ï¸</span> Pasif Et
                    </button>
                    <button class="btn btn-info" id="restoreUserBtn" style="display: none;">
                        <span class="btn-icon">â™»ï¸</span> Geri YÃ¼kle
                    </button>
                    <button class="btn btn-danger" id="deleteUserBtn">
                        <span class="btn-icon">ğŸ—‘ï¸</span> KullanÄ±cÄ±yÄ± Sil
                    </button>
                    <button class="btn btn-dark" id="hardDeleteUserBtn" style="display: none;">
                        <span class="btn-icon">âŒ</span> Tamamen Sil
                    </button>
                </div>

                <!-- Rol DeÄŸiÅŸtirme Formu -->
                <div id="changeRoleForm" style="display: none; margin-top: 1rem;">
                    <div class="form-group">
                        <label for="newRole">Yeni Rol SeÃ§in</label>
                        <select id="newRole">
                            <option value="MASTER_ADMIN">Master Admin</option>
                            <option value="PRODUCT_OWNER">Product Owner</option>
                            <option value="BOOKKEEPER">Muhasebe</option>
                            <option value="DEVELOPER">GeliÅŸtirici</option>
                            <option value="SUPPORT">Destek</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="confirmRoleChange">RolÃ¼ GÃ¼ncelle</button>
                </div>
            </div>
        </div>
    </div>


    <script type="module" src="js/masterUsers.js"></script>
    <script type="module" src="js/common.js"></script>
</body>
</html>